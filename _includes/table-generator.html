<!-- _includes/table-generator.html -->
{% comment %}
  This include generates an HTML table from CSV data.
  Usage: {% include table-generator.html data=my_captured_data %}
{% endcomment %}

{%- assign table_data = include.data | strip -%}
{%- assign lines = table_data | split: '
' -%}

<div class="table-wrapper">
  <table>
    <thead>
      <tr>
        {%- assign header_row = lines[0] | split: ',' -%}
        {%- for header in header_row -%}
          <th>{{ header | strip }}</th>
        {%- endfor -%}
      </tr>
    </thead>
    <tbody>
      {%- for line in lines offset: 1 -%}
        <tr>
          {%- assign cells = line | split: ',' -%}
          {%- for cell in cells -%}
            <td>{{ cell | strip }}</td>
          {%- endfor -%}
        </tr>
      {%- endfor -%}
    </tbody>
  </table>
</div>